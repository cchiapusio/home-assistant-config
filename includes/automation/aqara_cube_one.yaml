- id: ac7f1a14-46a8-4eea-b1c2-f80038e875fa
  alias: twist left for lights down
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 00:15:8d:00:05:42:b0:1e
      command: rotate_left
  condition:
    - condition: state
      entity_id: light.mbr_lights
      state:  'on'
  action:
    - service: light.turn_on
      data:
        brightness_step_pct: -20
      entity_id: light.mbr_lights


- id: fffe4724-1468-4901-998c-8cf6b1a1f3e8
  alias: twist right for lights up
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_ieee: 00:15:8d:00:05:42:b0:1e
      command: rotate_right
  condition:
    - condition: state
      entity_id: light.mbr_lights
      state:  'on'
  action:
    - service: light.turn_on
      data:
        brightness_step_pct: 20
      entity_id: light.mbr_lights

- id: '1620264989749'
  alias: AqaraCube MBR
  description: 'Aqara Cube MBR actions'
  use_blueprint:
    path: Mikkelmoeller/aqara-magic-cube-zha-51-actions.yaml
    input:
      remote: c241196803e22cfa7fbff271770e13de
      flip_90: true
      cube_flip_90:
      - choose:
        - conditions:
          - condition: and
            conditions:
            - condition: state
              entity_id: light.mbr_lights
              state: 'off'
            - condition: state
              entity_id: switch.fairy_lights
              state: 'off'
          sequence:
          - scene: scene.mbr_lights_on
        - conditions:
          - condition: and
            conditions:
            - condition: state
              entity_id: light.mbr_lights
              state: 'on'
            - condition: state
              entity_id: switch.fairy_lights
              state: 'on'
          sequence:
          - scene: scene.mood_lighting
        - conditions:
          - condition: and
            conditions:
            - condition: state
              entity_id: light.mbr_lights
              state: 'off'
            - condition: state
              entity_id: switch.fairy_lights
              state: 'on'
          sequence:
          - scene: scene.mbr_lights_off
        default: []
      knock_any_side: true
      cube_knock_any:
      - scene: scene.mbr_lights_full

